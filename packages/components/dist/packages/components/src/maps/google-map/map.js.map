{"version":3,"file":"map.js","sources":["../../../../../../src/maps/google-map/map.tsx"],"sourcesContent":["import { __read, __rest } from \"tslib\";\r\nimport { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\r\nimport { Children, cloneElement, isValidElement, useEffect, useRef, useState, } from \"react\";\r\nimport { useDeepCompareEffectForMaps } from \"./utils\";\r\nvar Map = function (_a) {\r\n    var children = _a.children, onClick = _a.onClick, options = __rest(_a, [\"children\", \"onClick\"]);\r\n    var ref = useRef(null);\r\n    var _b = __read(useState(), 2), map = _b[0], setMap = _b[1];\r\n    useEffect(function () {\r\n        if (ref.current && !map) {\r\n            setMap(new window.google.maps.Map(ref.current, {}));\r\n        }\r\n    }, [ref, map]);\r\n    // because React does not do deep comparisons, a custom hook is used\r\n    // see discussion in https://github.com/googlemaps/js-samples/issues/946\r\n    useDeepCompareEffectForMaps(function () {\r\n        if (map) {\r\n            map.setOptions(options);\r\n        }\r\n    }, [map, options]);\r\n    useEffect(function () {\r\n        if (map) {\r\n            [\"click\", \"idle\"].forEach(function (eventName) {\r\n                return google.maps.event.clearListeners(map, eventName);\r\n            });\r\n            if (onClick) {\r\n                map.addListener(\"click\", onClick);\r\n            }\r\n        }\r\n    }, [map, onClick]);\r\n    return (_jsxs(_Fragment, { children: [_jsx(\"div\", { ref: ref, style: { width: \"100%\", height: \"100%\" } }), \" \", Children.map(children, function (child) {\r\n                if (isValidElement(child)) {\r\n                    // set the map prop on the child component\r\n                    return cloneElement(child, { map: map });\r\n                }\r\n                return null;\r\n            })] }));\r\n};\r\nexport default Map;\r\n"],"names":["Map","_a","children","onClick","options","__rest","ref","useRef","_b","__read","useState","map","setMap","useEffect","current","window","google","maps","useDeepCompareEffectForMaps","setOptions","forEach","eventName","event","clearListeners","addListener","_jsxs","_Fragment","_jsx","style","width","height","Children","child","isValidElement","cloneElement"],"mappings":"6TAIA,IAAIA,EAAM,SAAUC,GAChB,IAAIC,EAAWD,EAAGC,SAAUC,EAAUF,EAAGE,QAASC,EAAUC,EAAOJ,EAAI,CAAC,WAAY,YAChFK,EAAMC,EAAO,MACbC,EAAKC,EAAOC,IAAY,GAAIC,EAAMH,EAAG,GAAII,EAASJ,EAAG,GAuBzD,OAtBAK,GAAU,WACFP,EAAIQ,UAAYH,GAChBC,EAAO,IAAIG,OAAOC,OAAOC,KAAKjB,IAAIM,EAAIQ,QAAS,CAAxC,MAEZ,CAACR,EAAKK,IAGTO,GAA4B,WACpBP,GACAA,EAAIQ,WAAWf,EAEtB,GAAE,CAACO,EAAKP,IACTS,GAAU,WACFF,IACA,CAAC,QAAS,QAAQS,SAAQ,SAAUC,GAChC,OAAOL,OAAOC,KAAKK,MAAMC,eAAeZ,EAAKU,MAE7ClB,GACAQ,EAAIa,YAAY,QAASrB,GAGpC,GAAE,CAACQ,EAAKR,IACDsB,EAAMC,EAAW,CAAExB,SAAU,CAACyB,EAAK,MAAO,CAAErB,IAAKA,EAAKsB,MAAO,CAAEC,MAAO,OAAQC,OAAQ,UAAa,IAAKC,EAASpB,IAAIT,GAAU,SAAU8B,GACrI,OAAIC,EAAeD,GAERE,EAAaF,EAAO,CAAErB,IAAKA,IAE/B,IACV,MACZ"}