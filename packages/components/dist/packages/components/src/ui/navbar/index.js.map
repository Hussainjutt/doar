{"version":3,"file":"index.js","sources":["../../../../../../src/ui/navbar/index.tsx"],"sourcesContent":["import { __assign } from \"tslib\";\r\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\r\nimport { useCallback } from \"react\";\r\nimport { getSiblings } from \"@doar/shared/methods\";\r\nimport { useClickOutside } from \"@doar/shared/hooks\";\r\nimport { StyledNavbar, StyledNavitem, StyledNavlink } from \"./style\";\r\nimport Submenu from \"./submenu\";\r\nimport Megamenu from \"./megamenu\";\r\nvar Navbar = function (_a) {\r\n    var menus = _a.menus;\r\n    var clickHandler = function (e, hasChildren) {\r\n        if (hasChildren) {\r\n            e.preventDefault();\r\n            var target = e.currentTarget;\r\n            if (target.nodeName === \"A\") {\r\n                target = target.parentElement;\r\n            }\r\n            var submenu = target.querySelector(\".submenu\");\r\n            var siblings = getSiblings(target);\r\n            submenu === null || submenu === void 0 ? void 0 : submenu.classList.toggle(\"open\");\r\n            siblings.forEach(function (sib) {\r\n                sib.childNodes.forEach(function (child) {\r\n                    var _a;\r\n                    var childHT = child;\r\n                    (_a = childHT === null || childHT === void 0 ? void 0 : childHT.classList) === null || _a === void 0 ? void 0 : _a.remove(\"open\");\r\n                });\r\n            });\r\n        }\r\n    };\r\n    var onClose = useCallback(function () {\r\n        var nav = document.querySelector(\".navbar\");\r\n        var submenu = nav === null || nav === void 0 ? void 0 : nav.querySelectorAll(\".submenu\");\r\n        submenu === null || submenu === void 0 ? void 0 : submenu.forEach(function (el) { return el.classList.remove(\"open\"); });\r\n    }, []);\r\n    var containerRef = useClickOutside(onClose);\r\n    return (_jsx(StyledNavbar, __assign({ ref: containerRef, className: \"navbar\" }, { children: menus &&\r\n            menus.map(function (nav) {\r\n                var submenu = nav.submenu, megamenu = nav.megamenu, navId = nav.id, NavIcon = nav.Icon, navLabel = nav.label;\r\n                var hasSubmenu = !!(submenu === null || submenu === void 0 ? void 0 : submenu.length);\r\n                var hasMegamenu = !!(megamenu === null || megamenu === void 0 ? void 0 : megamenu.length);\r\n                var hasChildren = hasSubmenu || hasMegamenu;\r\n                return (_jsxs(StyledNavitem, __assign({ \"$hasSubmenu\": hasChildren, onClick: function (e) { return clickHandler(e, hasChildren); } }, { children: [_jsxs(StyledNavlink, __assign({ path: hasChildren ? \"#!\" : nav.url }, { children: [NavIcon && _jsx(NavIcon, {}), navLabel] })), submenu && _jsx(Submenu, { menu: submenu }), megamenu && _jsx(Megamenu, { menu: megamenu })] }), navId));\r\n            }) })));\r\n};\r\nNavbar.defaultProps = {\r\n    menus: [],\r\n};\r\nexport default Navbar;\r\n"],"names":["Navbar","_a","menus","onClose","useCallback","nav","document","querySelector","submenu","querySelectorAll","forEach","el","classList","remove","containerRef","useClickOutside","_jsx","StyledNavbar","__assign","ref","className","children","map","megamenu","navId","id","NavIcon","Icon","navLabel","label","hasSubmenu","length","hasMegamenu","hasChildren","_jsxs","StyledNavitem","$hasSubmenu","onClick","e","preventDefault","target","currentTarget","nodeName","parentElement","siblings","getSiblings","toggle","sib","childNodes","child","childHT","clickHandler","StyledNavlink","path","url","Submenu","menu","Megamenu","defaultProps"],"mappings":"iZAQA,IAAIA,EAAS,SAAUC,GACnB,IAAIC,EAAQD,EAAGC,MAoBXC,EAAUC,GAAY,WACtB,IAAIC,EAAMC,SAASC,cAAc,WAC7BC,EAAUH,aAAiC,EAASA,EAAII,iBAAiB,YAC7ED,SAAkDA,EAAQE,SAAQ,SAAUC,GAAM,OAAOA,EAAGC,UAAUC,OAAO,OAAU,GAHlG,GAItB,IACCC,EAAeC,EAAgBZ,GACnC,OAAQa,EAAKC,EAAcC,EAAS,CAAEC,IAAKL,EAAcM,UAAW,UAAY,CAAEC,SAAUnB,GACpFA,EAAMoB,KAAI,SAAUjB,GAChB,IAAIG,EAAUH,EAAIG,QAASe,EAAWlB,EAAIkB,SAAUC,EAAQnB,EAAIoB,GAAIC,EAAUrB,EAAIsB,KAAMC,EAAWvB,EAAIwB,MACnGC,KAAgBtB,aAAyC,EAASA,EAAQuB,QAC1EC,KAAiBT,aAA2C,EAASA,EAASQ,QAC9EE,EAAcH,GAAcE,EAChC,OAAQE,EAAMC,EAAejB,EAAS,CAAEkB,YAAeH,EAAaI,QAAS,SAAUC,GAAK,OA/BrF,SAAUA,EAAGL,GAC5B,GAAIA,EAAa,CACbK,EAAEC,iBACF,IAAIC,EAASF,EAAEG,cACS,MAApBD,EAAOE,WACPF,EAASA,EAAOG,eAEpB,IAAInC,EAAUgC,EAAOjC,cAAc,YAC/BqC,EAAWC,EAAYL,GAC3BhC,SAAkDA,EAAQI,UAAUkC,OAAO,QAC3EF,EAASlC,SAAQ,SAAUqC,GACvBA,EAAIC,WAAWtC,SAAQ,SAAUuC,GAC7B,IAAIhD,EAE2E,QAA9EA,EAAKiD,MADQD,OACiC,EADjCA,EACkDrC,iBAA8B,IAAPX,GAAyBA,EAAGY,OAAO,aAGrI,EAc0GsC,CAAab,EAAGL,EAAe,GAAI,CAAEZ,SAAU,CAACa,EAAMkB,EAAelC,EAAS,CAAEmC,KAAMpB,EAAc,KAAO5B,EAAIiD,KAAO,CAAEjC,SAAU,CAACK,GAAWV,EAAKU,EAAS,CAAA,GAAKE,MAAepB,GAAWQ,EAAKuC,EAAS,CAAEC,KAAMhD,IAAYe,GAAYP,EAAKyC,EAAU,CAAED,KAAMjC,OAAiBC,QAEnY,EACDxB,EAAO0D,aAAe,CAClBxD,MAAO"}